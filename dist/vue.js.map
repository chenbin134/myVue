{"version":3,"file":"vue.js","sources":["../src/util.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isObject(obj){\n    return typeof obj == 'object' && obj != 'null'\n}","let oldArrayMethods = Array.prototype;\n\nexport  let arrayMethods = Object.create(oldArrayMethods);\n\nlet methods = [\n    'pop',\n    'push',\n    'shift',\n    'unshift',\n    'splice',\n    'reverse',\n    'sort'\n]\n\nmethods.forEach(method => {\n    arrayMethods[method] = function(...args){\n        let ob = this.__ob__;\n        let result = oldArrayMethods[method].apply(this,args);\n        let inserted;\n        switch(method){\n            case 'push':\n            case 'unshift':\n                inserted = args;\n                break;\n            case 'splice':\n                inserted = args.slice(2);\n                break\n            default :\n                break\n        }\n        inserted && ob.observeArray(inserted)\n        return result;\n    }\n})","import { isObject } from '../util.js'\nimport { arrayMethods } from './array.js'\nclass Observe {\n    constructor(data) {\n        Object.defineProperty(data,'__ob__',{\n            enumerable : false,\n            configurable : false,\n            value : this\n        })\n        // 遍历对象，使用Object.defineProperty 处理\n        if (Array.isArray(data)) { // 如果是数组\n            data.__proto__ = arrayMethods;\n            this.observeArray(data);// 如果是对象数组，将其每一项都observe arr[0].name = xxx\n        } else {\n            this.walk(data)\n        }\n\n    }\n    walk(data) {\n        Object.keys(data).forEach(key => {\n            defineReactive(data, key, data[key]);\n        })\n    }\n    observeArray(data){\n        for(let i=0;i<data.length;i++) {\n            observe(data[i])\n        }\n    }\n\n\n}\n// 遍历递归为data的每个属性增加get set 方法\nfunction defineReactive(data, key, value) {\n    observe(value); // 如果data内的属性还有对象，也做循环添加get set\n    Object.defineProperty(data, key, {\n        get() {\n            return value\n        },\n        set(newvalue) {\n            if (value == newvalue) return;\n            observe(newvalue);\n            value = newvalue\n        }\n    })\n\n}\nexport function observe(data) {\n\n    if (!isObject(data)) {\n        return;\n    }\n\n    if(data.__ob__ instanceof Observe) {\n        return;\n    }\n\n    return new Observe(data);\n\n\n}","import {observe} from './observe/index.js'\nexport function initState(vm){\n    const opts = vm.$options;\n    if(opts.props) {\n        initProps(vm)\n    }\n    if(opts.methods) {\n        initMethod(vm)\n    }\n    if(opts.data) {\n        initData(vm)\n    }\n    // .....\n}\nfunction initProps(vm){}\nfunction initMethod(vm){}\nfunction initData(vm){\n    let data = vm.$options.data;\n    data = vm._data =  typeof data == 'function' ? data() : data;\n    observe(data);\n}","import {initState} from './state.js'\nexport function initMixin(Vue){\n    Vue.prototype._init = function(options){\n        let vm = this; // 当前vue实例\n        vm.$options = options; // options是用户传入的所有参数\n        initState(vm);\n    }\n\n}","import {initMixin} from './init.js'\nfunction Vue(options){\n    // 初始化状态\n    this._init(options)\n}\ninitMixin(Vue)\nexport default Vue;"],"names":["isObject","obj","oldArrayMethods","Array","prototype","arrayMethods","Object","create","methods","forEach","method","ob","__ob__","args","result","apply","inserted","slice","observeArray","Observe","data","defineProperty","enumerable","configurable","value","isArray","__proto__","walk","keys","key","defineReactive","i","length","observe","get","set","newvalue","initState","vm","opts","$options","props","initData","_data","initMixin","Vue","_init","options"],"mappings":"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"}